(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(50),o=n.n(r),u=(n(59),n(2)),i=n.n(u),s=n(36),l=n(25),d=n(26),m=n(28),p=n(27),h=n(12),f=n(29),b=n(51),g=n.n(b),v=n(37),j=(n(41),n(53)),O=n(30),k=function(e){var t=e.children;if("object"!==typeof t)return t.toString();var n=Object.keys(t).map(function(e){return function(e){var t=e.label,n=e.value,r=Object(a.useState)(!0),o=Object(j.a)(r,2),u=o[0],i=o[1];return c.a.createElement("div",{key:t,className:O.borders},c.a.createElement("div",{className:"p-4 ".concat(O.background),onClick:function(){return i(!u)},"data-component-id":"toggle-display"},t),c.a.createElement("div",{className:"p-4 text-truncate ".concat(u?"":"d-none"),"data-component-id":"displayed-value"},k({children:n})))}({label:e,value:t[e]})});return c.a.createElement("div",{className:O.borders},n)},E=k,y={default:[{id:"default",label:"Default Template",template:function(e){var t=e.document;return c.a.createElement("div",{className:"container"},c.a.createElement(E,null,t))}}],CUSTOM_TEMPLATE:[{id:"default",label:"Document",template:function(e){var t=e.document;return c.a.createElement("div",{className:"container"},c.a.createElement("h1",null,"Rendered with custom template"),c.a.createElement("p",null,"Adding change to custom template"),c.a.createElement("pre",null,JSON.stringify(t,null,2)))}}],NULL:[]},T=n(20),w=n(21),P=n(52),x=n.n(P);w.pdfjs.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(w.pdfjs.version,"/pdf.worker.js");var S=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).onDocumentLoadSuccess=n.onDocumentLoadSuccess.bind(Object(h.a)(n)),n.onPageLoadSuccess=n.onPageLoadSuccess.bind(Object(h.a)(n)),n.state={numPages:null},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"onDocumentLoadSuccess",value:function(e){var t=e.numPages;this.setState({numPages:t}),this.props.handleHeightUpdate(document.documentElement.offsetHeight)}},{key:"onPageLoadSuccess",value:function(){this.props.handleHeightUpdate(document.documentElement.offsetHeight)}},{key:"render",value:function(){var e=this,t=this.props.attachment.data,n=this.state.numPages;return c.a.createElement(w.Document,{className:"container",file:"data:application/pdf;base64,".concat(t),onLoadSuccess:this.onDocumentLoadSuccess},Object(T.range)(n).map(function(t){return c.a.createElement(w.Page,{className:x.a.page,key:"page_".concat(t+1),pageNumber:t+1,onLoadSuccess:e.onPageLoadSuccess})}))}}]),t}(a.Component),H=function(e){var t=e.attachment;return c.a.createElement("div",null,c.a.createElement("h2",null,"Rendering of this type of attachment is not supported."),c.a.createElement("p",null,"Please check your mimetype: ",t.type))},D=function(e){var t,n=e.attachment,a=e.handleHeightUpdate;switch(n.type){case"application/pdf":t=S;break;default:t=H}return function(){return c.a.createElement(t,{attachment:n,handleHeightUpdate:a})}},C=function(e,t){return e.map(function(e,n){return{id:"attachment-".concat(n),label:e.filename,template:D({attachment:e,handleHeightUpdate:t})}})},L=function(e,t){if(!e)return[];var n=Object(T.get)(e,"$template.name"),a=y[n]||y.default,c=C(Object(T.get)(e,"attachments",[]),t);return[].concat(Object(v.a)(a),Object(v.a)(c))},N=function(){try{return window.self!==window.top}catch(e){return!0}},_=function(e){var t=e.tabIndex,n=e.document,a=e.handleHeightUpdate,r=L(n,a)[t].template;return c.a.createElement(r,{document:n})},U=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleDocumentChange=n.handleDocumentChange.bind(Object(h.a)(n)),n.selectTemplateTab=n.selectTemplateTab.bind(Object(h.a)(n)),n.updateParentHeight=n.updateParentHeight.bind(Object(h.a)(n)),n.updateParentTemplateTabs=n.updateParentTemplateTabs.bind(Object(h.a)(n)),n.state={parentFrameConnection:null,document:null,tabIndex:0},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"updateParentHeight",value:function(){var e=Object(s.a)(i.a.mark(function e(t){var n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!N()){e.next=8;break}return n=this.state.parentFrameConnection,e.next=4,n;case 4:if(!(a=e.sent).updateHeight){e.next=8;break}return e.next=8,a.updateHeight(t);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateParentTemplateTabs",value:function(){var e=Object(s.a)(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!N()){e.next=8;break}return t=this.state.parentFrameConnection,e.next=4,t;case 4:if(!(n=e.sent).updateTemplates){e.next=8;break}return e.next=8,n.updateTemplates((a=this.state.document,L(a).map(function(e){return{id:e.id,label:e.label}})));case 8:case"end":return e.stop()}var a},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"selectTemplateTab",value:function(e){this.setState({tabIndex:e})}},{key:"handleDocumentChange",value:function(e){this.setState({document:e})}},{key:"componentDidUpdate",value:function(){this.updateParentTemplateTabs(),this.updateParentHeight(document.documentElement.offsetHeight+60)}},{key:"componentDidMount",value:function(){var e=this,t=this.handleDocumentChange,n=this.selectTemplateTab;if(window.openAttestation={renderDocument:t,selectTemplateTab:n},N()){var a=g()({methods:{renderDocument:t,selectTemplateTab:n}}).promise;this.setState({parentFrameConnection:a})}window.addEventListener("resize",function(){return e.updateParentHeight(document.documentElement.offsetHeight)})}},{key:"render",value:function(){return this.state.document?c.a.createElement(_,{document:this.state.document,tabIndex:this.state.tabIndex,handleHeightUpdate:this.updateParentHeight}):null}}]),t}(a.Component);o.a.render(c.a.createElement(U,null),document.getElementById("root"))},23:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=23},30:function(e,t,n){e.exports={borders:"NestedComponent_borders__1GjW0",background:"NestedComponent_background__JBDPc"}},52:function(e,t,n){e.exports={page:"pdfRenderer_page__3h3RS"}},54:function(e,t,n){e.exports=n(108)},59:function(e,t,n){},69:function(e,t){},71:function(e,t){},72:function(e,t){},73:function(e,t){},74:function(e,t){}},[[54,1,2]]]);
//# sourceMappingURL=main.b71bd431.chunk.js.map